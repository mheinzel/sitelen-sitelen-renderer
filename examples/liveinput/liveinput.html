<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <!--<link rel="stylesheet" href="styles/sitelen.css">-->
    <meta charset="utf-8">
    <script type="text/javascript" src="../../src/tokiponaparser.js"></script>
    <script type="text/javascript" src="../../src/sitelenparser.js"></script>
    <script type="text/javascript" src="../../src/renderer.js"></script>
    <style>
        body {
            font-family: sans-serif;
            text-align: center;
        }

        h1 {
            font-size: 1.5em;
            margin: 1em auto;
            display: block;
        }

        .wordmark {
            color: red;
        }

        #sitelen {
            border-radius: 1em;
            margin: 0 auto;
            width: 20em;
        }

        #sitelen svg {
            width: 100%;
        }

        #sitelen input {
            margin: 1em auto;
            display: block;
            width: 50%;
        }

        #sitelen a {
            text-align: center;
            display: block;
            margin: 1   em 0;
            width: 100%;
        }

        #tokiInput {
            margin: 2em auto;
            display: block;
            font-size: 1em;
            width: 20em;
        }

        #known-issues a {
            display: block;
        }

        .text-container {
            text-align: left;
            margin: 0 auto;
            width: 30em;
        }
    </style>
</head>
<body>

<div class="text-container">
    <h1>Live Toki Pona <span class="wordmark">Sitelen Sitelen Renderer</span></h1>
    <p>I created <span class="wordmark">Sitelen Sitelen Renderer</span> because I am fascinated by combining the
        artifical
        language Toki Pona with the non-linear writing style 'Sitelen Sitelen' by Jonathan Gabel. Unlike other work with
        Sitelen Sitelen I want the writings to be generated by the computer. My <a
                href="http://nullelement.org/2015/05/living-toki-pona-using-flexbox-layout-and-sitelen-sitelen/">first
            attempt</a> was in the beginning of 2015 when I experimented with CSS Flexbox using SVG for the Glyphs. The
        algorithm was limited and doomed so in October 2015 I started anew, and set out to create SVG-only sitelen
        sitelen that can be exported and reused.
    <p>
    <p>On this page you can type (proper) Toki Pona. The text is parsed
        into structures that can be rendered in the style of Sitelen Sitelen. By hovering at the top of the glyphs you
        can
        choose the form that you like. You can even download the self-contained SVG which you can then use wherever.</p>
    <p>Mind that this project is very much in alpha, many language constructs are not implemented yet. If you find them
        you can add them to the issue list, see my <a href="https://github.com/olafjanssen/sitelensitelenrenderer/">GitHub
            repo</a>. Also check out the Toki Pona <a href="../proverbs/proverbs.html" target="_blank">proverbs</a> from Sonja's book generated by <span class="wordmark">Sitelen Sitelen Renderer</span>.</p>

    <p>~ Cheers! <a href="https://nl.linkedin.com/in/otajanssen" target="_blank">Olaf Janssen</a></p>

    <input type="text" id="tokiInput" placeholder="write toki pona here">

    <div id="sitelen">

    </div>

    <h2>Known issues (<a href="https://github.com/olafjanssen/sitelensitelenrenderer/issues">GitHub</a>)</h2>
    <ul id="known-issues">

    </ul>

    <h2>Attribution</h2>
    <p>This live sitelen sitelen sandbox web app is made possible by the great work done work before me.</p>
    <p><a href="http://tokipona.org/" target="_blank">Toki Pona</a> is an artificial language invented in 2001 by Sonja Lang as an
        attempt to understand the meaning of
        life in 120 words. In my own search, I am convinced this language should not be used to translate large bodies
        of text or as an actual means of communication but as a personal tool for soul searching.</p>
    <p><a href="http://www.jonathangabel.com/archive/2012/projects_t47.html" target="_blank">Sitelen Sitelen or Sitelen Suwi</a> is a
        project created by Jonathan Gabel in 2012 who created a non-linear writing
        style for Toki Pona inspired by Mayan script. I try to keep the algorithm behind the <span
                class="wordmark">sitelen sitelen renderer</span> in the spirit of Jonathan's project and allow for the
        different ways of drawing the sitelen sitelen.</p>
    <p>The <span class="wordmark">sitelen sitelen renderer</span> formerly parsed text based on the <a
            href="http://www2.hawaii.edu/~chin/661F12/projects.html" target="_blank">context-free grammar by Zach
        Tomaszewski</a> in 2012. I have discontinued to improve this grammar now that I find it to give wrong parses in more and more
         sentences. I have replaced it by a simpler algorithm tailored to sitelen sitelen requirements.</p>
    <p>The <a href="http://forums.tokipona.org/viewtopic.php?f=7&p=13786#p13786" target="_blank">vectorized glyphs</a> are based on the
        excellent work by jan Same. To make my SVGs scalable I sadly had to get rid of the non-uniform stroke widths.
        Also I have slightly different ideas about how to use the containers so I took the liberty of slightly altering
        some glyphs.</p>
</div>

<script>
    window.onload = function () {
        var input = document.getElementById('tokiInput');
        input.addEventListener('input', renderInput);

        function renderInput() {
            var text = input.value;
            var preformattedText = preformat(text);
            var structuredSentence = parseSentence(preformattedText.parsable[0]);
            document.getElementById('sitelen').innerHTML = '';
            renderInteractiveSentence(structuredSentence);
        }

        input.value = 'pilin pona li pana e sijelo pona.';
        renderInput();

    };
</script>

<script>
    function loadIssues() {
        var xhr = new XMLHttpRequest;
        xhr.open('get', 'https://api.github.com/repos/olafjanssen/sitelensitelenrenderer/issues', true);
        xhr.onreadystatechange = function () {
            if (xhr.readyState != 4) return;
            var data = JSON.parse(xhr.response);
            data.forEach(function (issue) {
                var listItem = document.createElement('li'),
                        link = document.createElement('a');
                link.setAttribute('href', issue.html_url);
                link.setAttribute('target', '_blank');
                link.appendChild(document.createTextNode(issue.title));
                listItem.appendChild(link);
                document.getElementById('known-issues').appendChild(listItem);
            });
        };
        xhr.send();
    }

    loadIssues();
</script>

</body>
</html>
