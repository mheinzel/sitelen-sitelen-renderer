<html>
<head>
    <link rel="stylesheet" href="styles/sitelen.css">
    <script type="text/javascript" src="src/ckyparser.js"></script>
    <script type="text/javascript" src="src/simpleparser.js"></script>
    <script type="text/javascript" src="src/renderer.js"></script>
</head>
<body>
<input type="text" id="tokiInput">

<div id="sitelen">

</div>


<script>
    var types = ['jan', 'lili', 'wan', 'pi'];
    var hash = [];

    function appendSentence(base, index, depth) {

        var parseTable = ckyparser.getParse(base.join(' ')),
                structuredSentence = getStructuredSentence(parseTable);
        if (structuredSentence) {
            console.log(base, index, depth);
            addSentence(convertToInstructions(structuredSentence));
        }

        if (depth === 3) {
            return;
        }

        var newBase = base.slice(0);
        newBase.push(types[index]);

        setTimeout(function () {
            if (index + 1 < types.length) {
                appendSentence(base, index + 1, depth);
            }
            appendSentence(newBase, index, depth + 1);
        }, 1);
    }

    window.onload = function () {
        // li-less subject, noun, small mod, narrow mod, pi-container, interjection, li-container, e-container, preposition

        setTimeout(function () {

            var base = [];

            appendSentence(base, 0, 0);

        }, 500);

        function renderText(text) {
            var parsableText = preformat(text);
            parsableText.forEach(function (sentence) {
                var structuredSentence = parseSentence(sentence);
                addSentence(convertToInstructions(structuredSentence));
            });
        }

    };
</script>
</body>
</html>
