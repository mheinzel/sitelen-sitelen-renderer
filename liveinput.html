<html>
<head>
    <link rel="stylesheet" href="styles/sitelen.css">
    <script type="text/javascript" src="src/ckyparser.js"></script>
    <script type="text/javascript" src="src/simpleparser.js"></script>
    <script type="text/javascript" src="src/renderer.js"></script>
</head>
<body>
    <input type="text" id="tokiInput">

    <div id="sitelen">

    </div>

<script>
    window.onload = function () {

        document.getElementById('tokiInput').addEventListener('input', function(e){
            var parseTable = ckyparser.getParse(document.getElementById('tokiInput').value),
                    structuredSentence = getStructuredSentence(parseTable);

            if (structuredSentence) {
                addSentence(convertToInstructions(structuredSentence), true);
            }
        });

        function renderText(text) {
            var parsableText = preformat(text);
            parsableText.forEach(function (sentence) {
                var structuredSentence = parseSentence(sentence);
                addSentence(convertToInstructions(structuredSentence));
            });
        }

//        //var text = "tenpo suno pi nanpa tu tu tu la jan sewi li pali e soweli mute. mi moku, la mi pilin pona. ona li pali e soweli pi pona lukin e soweli pi ike lukin. ona li pona, ona li pali e soweli wawa e soweli wawa ala. tenpo suno ni la jan sewi li pali kin e jan. jan sewi li pali pini. ona li toki e ni: jan li pona.";
//        var text = "ona pona li pali pona e soweli pona e soweli pi ike lukin.";
//        setTimeout(function () {
//            renderText(text);
//        }, 500);
//
//        var msg = new SpeechSynthesisUtterance();
//        var voices = window.speechSynthesis.getVoices();
//        msg.voice = voices[10]; // Note: some voices don't support altering params
//        msg.voiceURI = 'native';
//        msg.volume = 1; // 0 to 1
//        msg.rate = 0.5; // 0.1 to 10
//        msg.pitch = 1; //0 to 2
//        msg.text = 'ona li pali-e soweli pi pona lukin-e soweli pi ike lukin.';
//        msg.lang = 'fi-FI';
//        window.speechSynthesis.speak(msg);

    };
</script>
</body>
</html>
