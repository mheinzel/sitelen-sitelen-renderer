<html>
<head>
    <link rel="stylesheet" href="styles/sitelen.css">
    <script type="text/javascript" src="scripts/ckyparser.js"></script>
    <script type="text/javascript" src="scripts/simpleparser.js"></script>
    <script type="text/javascript" src="scripts/renderer.js"></script>
</head>
<body>
    <input type="text" id="tokiInput">

    <div id="sitelen">

    </div>

<script>
    window.onload = function () {

        document.getElementById('tokiInput').addEventListener('input', function(e){
            var parseTable = ckyparser.getParse(document.getElementById('tokiInput').value),
                    structuredSentence = getStructuredSentence(parseTable);

            if (structuredSentence) {
                addSentence(convertToInstructions(structuredSentence), true);
            }
        });

        function renderText(text) {
            var parsableText = preformat(text);
            parsableText.forEach(function (sentence) {
                var structuredSentence = parseSentence(sentence);
                addSentence(convertToInstructions(structuredSentence));
            });
        }

        //var text = "tenpo suno pi nanpa tu tu tu la jan sewi li pali e soweli mute. mi moku, la mi pilin pona. ona li pali e soweli pi pona lukin e soweli pi ike lukin. ona li pona, ona li pali e soweli wawa e soweli wawa ala. tenpo suno ni la jan sewi li pali kin e jan. jan sewi li pali pini. ona li toki e ni: jan li pona.";
        var text = "ona li pali e soweli pi pona lukin e soweli pi ike lukin.";
        setTimeout(function () {
            renderText(text);
        }, 500);

    };
</script>
</body>
</html>
