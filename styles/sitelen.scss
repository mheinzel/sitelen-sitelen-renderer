body {
  font-size: 48px;
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;

}

.toki-sentence {
  margin: 1em;
  width: 2em;
}

.toki-container {
  align-content: center;
  align-items: center;
  justify-content: center;
  display: inline-flex;
  position: relative;
  flex-wrap: wrap;
}

.toki-sentence > .toki-container:first-child > * {
  font-size: 1em;
}

.toki-container[data-toki-size="regular"] {

  flex-direction: row;

  & > * {
    width: 1em;
    height: 1em;
  }
}

.toki-container[data-toki-size="wide"] {
  flex-direction: row;
  height: 1em;
  width: 2em;

  &[data-toki-children="1"] {

    & > * {
      flex: 0 0 1em;
      height: 1em;
    }
  }

  &[data-toki-children="2"] {

    & > * {
      flex: 0 0 1em;
      height: 1em;
    }
  }

  &[data-toki-children="3"] {
    height: 2 / 3 * 1em;

    & > * {
      flex: 0 0 2 / 3 * 1em;
      height: 2 / 3 * 1em;
    }
  }
}

.toki-container[data-toki-size="tall"] {
  flex-direction: column;
  height: 2em;

  &[data-toki-children="1"] {
    padding-bottom: 0;

    & > .toki-word {
      flex: 0 0 100%;
      width: 2em;
    }
  }

  &[data-toki-children="2"] {
    padding-bottom: 0.1em;

    & > .toki-word {
      flex: 0 0 50%;
      width: 1em;
    }
  }

  &[data-toki-children="3"] {
    padding-bottom: 0.2em;

    & > .toki-word {
      flex: 0 0 1/3*100%;
      width: 2/3*1em;
    }
  }
}

.toki-container[data-toki-size="double"] {
  flex-direction: column;
  height: 2em;
  width: 2em;

  &[data-toki-children="4"] {
    & > * {
      flex: 0 0 1em;
      width: 1em;
    }
  }

  &[data-toki-children="5"] {
    & > * {
      flex: 1 1 1/3*100%;
      width: 1em;
    }
  }

  &[data-toki-children="6"] {
    & > * {
      flex: 1 1 1/3*100%;
      width: 1em;
    }
  }

  &[data-toki-children="7"],
  &[data-toki-children="8"],
  &[data-toki-children="9"] {
    & > * {
      flex: 1 1 1/3*100%;
      width: 1/3*100%;
    }
  }
}

.toki-word {
  position: relative;
  font-size: 0.875em;

  &::before {
    background-size: 100% 100%;
    margin: -0.1em 0 0 -0.1em;
    position: absolute;
    padding: 0.1em;
    height: 100%;
    width: 100%;
    content: '';
    left: 0;
    top: 0;
  }

  &.toki-jan::before {
    background-image: url(../images/wordglyphs/tp-wg-jan.svg);
  }
  &.toki-moku::before {
    background-image: url(../images/wordglyphs/tp-wg-moku.svg);
  }
  &.toki-wile::before {
    background-image: url(../images/wordglyphs/tp-wg-wile.svg);
  }
  &.toki-li::before {
    background-image: url(../images/wordglyphs/tp-wg-li.svg);
  }
  &.toki-pona::before {
    background-image: url(../images/wordglyphs/tp-wg-pona.svg);
  }
  &.toki-sina::before {
    background-image: url(../images/wordglyphs/tp-wg-sina.svg);
  }
  &.toki-kili::before {
    background-image: url(../images/wordglyphs/tp-wg-kili.svg);
  }
  &.toki-mi::before {
    background-image: url(../images/wordglyphs/tp-wg-mi.svg);
  }
  &.toki-tawa::before {
    background-image: url(../images/wordglyphs/tp-wg-tawa.svg);
  }
  &.toki-utala::before {
    background-image: url(../images/wordglyphs/tp-wg-utala.svg);
  }
  &.toki-suwi::before {
    background-image: url(../images/wordglyphs/tp-wg-suwi.svg);
  }


  &::after {
    background-size: 100% 100%;
    margin: -0.1em 0 0 -0.1em;
    position: absolute;
    padding: 0.1em;
    height: 100%;
    width: 100%;
    content: '';
    top: 50%;
    left: 0;
  }

  &.toki-mod-lili::after {
    background-image: url(../images/wordglyphs/tp-wg-lili.svg);
  }

  &.toki-mod-mute::after {
    background-image: url(../images/wordglyphs/tp-wg-mute.svg);
  }

  &.toki-mod-kon::after {
    background-image: url(../images/wordglyphs/tp-wg-kon.svg);
  }

  &.toki-mod-sin::after {
    background-image: url(../images/wordglyphs/tp-wg-sin.svg);
  }
}

.toki-punctuation {
  position: relative;
  width: 2em;
  height: 0.35em;

  &::before {
    background-size: 100% 100%;
    margin: -0.25em 0 0 -0.25em;
    position: absolute;
    padding: 0.25em;
    height: 100%;
    width: 100%;
    content: '';
    z-index: -1;
    left: 0;
    top: 0;
  }

  &[data-toki-size="wide"].toki-period::before {
    background-image: url(../images/wordglyphs/tp-p-period-wide.svg);
  }
}



.toki-container {
  &::before {
    background-size: 100% 100%;
    margin: -0.1em 0 0 -0.1em;
    position: absolute;
    padding: 0.1em;
    height: 100%;
    width: 100%;
    content: '';
    left: 0;
    top: 0;
  }

  &[data-toki-size="regular"]::before {
    margin: -0.15em 0 0 -0.15em;
    padding: 0.15em;
  }

  &[data-toki-size="wide"]::before {
    margin: -0.3em 0 0 -0.15em;
    padding: 0.3em 0.15em;
  }

  &.toki-li::before {
    background-image: url(../images/wordglyphs/tp-wg-li.svg);
  }

  &[data-toki-size="wide"].toki-li {
    margin-bottom: 0.2em;

    & + .toki-punctuation {
      margin-top: -0.2em;
    }

    &::before {
      background-image: url(../images/wordglyphs/tp-wg-li-wide.svg);
    }
  }

  &.toki-tawa::before {
    background-image: url(../images/wordglyphs/tp-wg-tawa.svg);
  }

  &[data-toki-size="wide"].toki-tawa {
    margin-bottom: 0.2em;
    justify-content: flex-start;

    &[data-toki-children="1"] {
      justify-content: center;
    }

    & + .toki-punctuation {
      margin-top: -0.2em;
    }

    &::before {
      background-image: url(../images/wordglyphs/tp-c-tawa-wide.svg);
      padding-right: 0.5em;
    }
  }

  &.toki-e[data-toki-size="regular"]{
    justify-content: flex-start;

    & > * {
      font-size: 0.55em;
    }

    &::before {
      background-image: url(../images/wordglyphs/tp-wg-e.svg);
    }
  }

  &[data-toki-size="wide"].toki-e {
    margin-bottom: 0.2em;
    justify-content: flex-start;

    &[data-toki-children="1"] {
      justify-content: center;
    }

    & + .toki-punctuation {
      margin-top: -0.2em;
    }

    &::before {
      background-image: url(../images/wordglyphs/tp-wg-e-wide.svg);
    }
  }

}